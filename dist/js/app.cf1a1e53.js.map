{"version":3,"file":"js/app.cf1a1e53.js","mappings":"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","sources":["webpack://lowcode-visual-editor/./src/App.vue","webpack://lowcode-visual-editor/./src/packages/block-resize.jsx","webpack://lowcode-visual-editor/./src/packages/editor-block.jsx","webpack://lowcode-visual-editor/./src/packages/events.js","webpack://lowcode-visual-editor/./src/packages/useComponentDragger.js","webpack://lowcode-visual-editor/./src/packages/useFocus.js","webpack://lowcode-visual-editor/./src/packages/useBlockDragger.js","webpack://lowcode-visual-editor/./src/packages/useCommand.js","webpack://lowcode-visual-editor/./src/components/DialogForm.jsx","webpack://lowcode-visual-editor/./src/components/DropdownMenu.jsx","webpack://lowcode-visual-editor/./src/packages/editor-operator.jsx","webpack://lowcode-visual-editor/./src/packages/visual-editor.jsx","webpack://lowcode-visual-editor/./src/components/RangeSelector.jsx","webpack://lowcode-visual-editor/./src/utils/editor-config.jsx","webpack://lowcode-visual-editor/./src/App.vue?de3f","webpack://lowcode-visual-editor/./src/main.js","webpack://lowcode-visual-editor/webpack/bootstrap","webpack://lowcode-visual-editor/webpack/runtime/chunk loaded","webpack://lowcode-visual-editor/webpack/runtime/compat get default export","webpack://lowcode-visual-editor/webpack/runtime/define property getters","webpack://lowcode-visual-editor/webpack/runtime/global","webpack://lowcode-visual-editor/webpack/runtime/hasOwnProperty shorthand","webpack://lowcode-visual-editor/webpack/runtime/jsonp chunk loading","webpack://lowcode-visual-editor/webpack/startup"],"sourcesContent":["<template>\n  <div class=\"app\">\n    <VisualEditor v-model=\"state\" :formData=\"formData\"></VisualEditor>\n  </div>\n\n</template>\n\n<script>\nimport { provide, ref } from 'vue';\nimport data from './data.json';\nimport VisualEditor from './packages/visual-editor';\nimport {registerConfig as config} from './utils/editor-config';\n\nexport default {\n  components: {\n    VisualEditor\n  },\n  setup() {\n    const pageData = sessionStorage.getItem('pageData') ? JSON.parse(sessionStorage.getItem('pageData')) : data;\n\n    const state = ref(pageData);\n\n    provide('config', config); // provide 通信\n\n\n    const formData = ref({\n      username: 'Bao',\n      password: 123123,\n      start: 1,\n      end: 200\n    })\n\n    return {\n      state,\n      formData\n    }\n  }\n}\n\n</script>\n\n<style lang=\"scss\">\n* {\n  box-sizing: border-box;\n}\n.app {\n  position: fixed;\n  top: 20px;\n  left: 20px;\n  right: 20px;\n  bottom: 20px;\n  // background-color: lightgray;\n}\n</style>\n","import { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    block: { type: Object },\r\n    component: { type: Object }\r\n\r\n  },\r\n  setup(props) {\r\n    const { width, height } = props.component.resize || {};\r\n\r\n    let data = {};\r\n    const onMousemove = (e) => {\r\n      let { clientX, clientY } = e;\r\n      let { startX,\r\n        startY, \r\n        startWidth,\r\n        startHeight,\r\n        startLeft,\r\n        startTop,\r\n        direction\r\n      } = data;\r\n      \r\n      if (direction.horizontal === 'center') {\r\n        clientX = startX;\r\n      }\r\n\r\n      if (direction.vertical === 'center') {\r\n        clientY = startY;\r\n      } \r\n      \r\n      const block = props.block;\r\n      let durX = clientX - startX;\r\n      let durY = clientY - startY;\r\n\r\n      if (direction.vertical === 'start') {\r\n        durY = -durY;\r\n        block.top = startTop - durY\r\n      }\r\n      if (direction.horizontal === 'start') {\r\n        durX = -durX;\r\n        block.left = startLeft - durX;\r\n      }\r\n      const width = startWidth + durX;\r\n      const height = startHeight + durY;\r\n\r\n      block.width = width;\r\n      block.height = height;\r\n      block.hasResize = true;\r\n    }\r\n\r\n    const onMouseup = () => {\r\n      document.body.removeEventListener('mousemove', onMousemove);\r\n      document.body.removeEventListener('mouseup', onMouseup);\r\n    }\r\n    const onMousedown = (e, direction) => {\r\n      e.stopPropagation();\r\n\r\n      data = {\r\n        startX: e.clientX,\r\n        startY: e.clientY,\r\n        startWidth: props.block.width,\r\n        startHeight: props.block.height,\r\n        startLeft: props.block.left,\r\n        startTop: props.block.top,\r\n        direction: direction\r\n\r\n      }\r\n      document.body.addEventListener('mousemove', onMousemove);\r\n      document.body.addEventListener('mouseup', onMouseup);\r\n    }\r\n\r\n    return () => {\r\n      return <div>\r\n        {width && <>\r\n          <div\r\n            class=\"block-resize block-resize-left\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'start', vertical: 'center' }) }}\r\n          ></div>\r\n          <div\r\n            class=\"block-resize block-resize-right\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'end', vertical: 'center' }) }}\r\n          ></div>\r\n        </>}\r\n        {height && <>\r\n          <div\r\n            class=\"block-resize block-resize-top\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'center', vertical: 'start' }) }}\r\n          ></div>\r\n          <div\r\n            class=\"block-resize block-resize-bottom\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'center', vertical: 'end' }) }}\r\n          ></div>\r\n        </>}\r\n        {width && height && <>\r\n          <div\r\n            class=\"block-resize block-resize-top-left\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'start', vertical: 'start' }) }}\r\n          ></div>\r\n          <div\r\n            class=\"block-resize block-resize-top-right\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'end', vertical: 'start' }) }}\r\n          ></div>\r\n          <div\r\n            class=\"block-resize block-resize-bottom-left\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'start', vertical: 'end' }) }}\r\n          ></div>\r\n          <div\r\n            class=\"block-resize block-resize-bottom-right\"\r\n            onMousedown={e => { onMousedown(e, { horizontal: 'end', vertical: 'end' }) }}\r\n          ></div>\r\n        </>}\r\n      </div>\r\n    }\r\n  }\r\n})","import { inject } from \"vue\";\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport { defineComponent } from \"vue\";\r\nimport BlockResize from \"./block-resize\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    block: { type: Object },\r\n    updateIndexBlock: { type: Function },\r\n    index: { type: Number },\r\n    formData: { type: Object }\r\n  },\r\n  setup(props) {\r\n    const blockStyles = computed(() => ({\r\n      top: `${props.block.top}px`,\r\n      left: `${props.block.left}px`,\r\n      zIndex: `${props.block.zIndex}`\r\n    }));\r\n\r\n    const config = inject('config');\r\n\r\n    const blockRef = ref(null);\r\n\r\n    onMounted(() => {\r\n      let { offsetWidth, offsetHeight } = blockRef.value;\r\n      let block = {\r\n        ...props.block,\r\n        width: offsetWidth,\r\n        height: offsetHeight,\r\n      };\r\n      if (props.block.alignCenter) {\r\n        block.left = props.block.left - offsetWidth / 2;\r\n        block.top = props.block.top - offsetHeight / 2;\r\n        block.alignCenter = false;\r\n      }\r\n      // block = Object.assign(props.block, block); // 应该通过事件更新\r\n      // console.log(block);\r\n      props.updateIndexBlock && props.updateIndexBlock(props.index, block);\r\n    })\r\n\r\n    return () => {\r\n      const component = config.componentsMap[props.block.type];\r\n      const RenderComponent = component.render({\r\n        size: props.block.hasResize ? { width: props.block.width, height: props.block.height } : {},\r\n        props: props.block.props,\r\n        model: Object.keys(component.model || {}).reduce((prev, modelName) => {\r\n          let propName = props.block.model[modelName];\r\n          const data = props.formData;\r\n          prev[modelName] = {\r\n            modelValue: props.formData[propName],\r\n            \"onUpdate:modelValue\": v => data[propName] = v\r\n          }\r\n          return prev;\r\n        }, {})\r\n      });\r\n\r\n      const { width, height } = component.resize || {}\r\n      return <div class=\"editor-block\" style={blockStyles.value} ref={blockRef}>\r\n        {RenderComponent}\r\n        {props.block.focus && (width || height) && <BlockResize\r\n          block={props.block}\r\n          component={component}\r\n        >\r\n        </BlockResize>}\r\n      </div>\r\n    }\r\n  }\r\n})","import mitt from 'mitt';\r\n\r\nexport const events = mitt();\r\n\r\n// events","import { events } from \"./events\";\r\n\r\nexport function useComponentDragger(containerRef, data) {\r\n  let currentComponent = null;\r\n\r\n  const dragenter = (e) => {\r\n    e.dataTransfer.dropEffect = 'move';\r\n\r\n  }\r\n  const dragover = (e) => {\r\n    e.preventDefault();\r\n  }\r\n  const dragleave = (e) => {\r\n    e.dataTransfer.dropEffect = 'none';\r\n  }\r\n  const drop = (e) => {\r\n    \r\n    let blocks = data.value.blocks;\r\n    data.value = {\r\n      ...data.value,\r\n      blocks: [\r\n        ...blocks,\r\n        {\r\n          top: e.offsetY,\r\n          left: e.offsetX,\r\n          zIndex: 1,\r\n          type: currentComponent.type,\r\n          alignCenter: true,\r\n          props: {},\r\n          model: {}\r\n        }\r\n      ]\r\n    }\r\n    currentComponent = null;\r\n  }\r\n\r\n  const dragstart = (e, component) => {\r\n    containerRef.value.addEventListener('dragenter', dragenter);\r\n    containerRef.value.addEventListener('dragover', dragover);\r\n    containerRef.value.addEventListener('dragleave', dragleave);\r\n    containerRef.value.addEventListener('drop', drop);\r\n    currentComponent = component;\r\n    events.emit('start');\r\n  }\r\n  const dragend = () => {\r\n    containerRef.value.removeEventListener('dragenter', dragenter);\r\n    containerRef.value.removeEventListener('dragover', dragover);\r\n    containerRef.value.removeEventListener('dragleave', dragleave);\r\n    containerRef.value.removeEventListener('drop', drop);\r\n    events.emit('end');\r\n\r\n  }\r\n\r\n  return {\r\n    dragend,\r\n    dragstart\r\n  }\r\n}","import { ref } from 'vue';\r\nimport { computed } from 'vue';\r\n\r\nexport function useFocus(data, previewRef, callback) {\r\n  const selectIndex = ref(-1);\r\n\r\n  const lastSelectedBlock = computed(() => data.value.blocks[selectIndex.value]);\r\n\r\n  const clearBlockFocus = () => {\r\n    data.value.blocks.forEach((block) => block.focus = false)\r\n  }\r\n  const containerMousedown = () => {\r\n    if (previewRef.value) return ;\r\n    clearBlockFocus();\r\n    selectIndex.value = -1;\r\n  }\r\n\r\n  const blockMousedown = (e, block, index) => {\r\n    if (previewRef.value) return ;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.shiftKey) {\r\n      if(focusData.value.focused.length < 2) {\r\n        block.focus = true;\r\n      } else {\r\n        block.focus = !block.focus;\r\n      }\r\n    } else if (!block.focus) {\r\n      clearBlockFocus();\r\n      block.focus = true;\r\n    }\r\n    selectIndex.value = index;\r\n    callback(e);\r\n  }\r\n\r\n  const focusData = computed(() => {\r\n    let focused = [];\r\n    let unfocused = [];\r\n    data.value.blocks.forEach(blcok => (blcok.focus ? focused : unfocused).push(blcok));\r\n    return { focused, unfocused }\r\n  })\r\n\r\n  return {\r\n    blockMousedown,\r\n    containerMousedown,\r\n    clearBlockFocus,\r\n    focusData,\r\n    lastSelectedBlock\r\n  }\r\n}","import { reactive } from \"vue\";\r\nimport { events } from \"./events\";\r\n\r\nexport function useBlockDragger(data, focusData, lastSelectedBlock) {\r\n  let dragState = {\r\n    startX: 0,\r\n    startY: 0,\r\n    dragging: false\r\n  }\r\n\r\n  let markline = reactive({\r\n    x: null,\r\n    y: null\r\n  })\r\n\r\n  const mousemove = (e) => {\r\n    let { clientX: moveX, clientY: moveY } = e;\r\n    if (!dragState.dragging) {\r\n      dragState.dragging = true;\r\n      events.emit('start');\r\n    }\r\n\r\n    let left = moveX - dragState.startX + dragState.startLeft;\r\n    let top = moveY - dragState.startY + dragState.startTop;\r\n    let lineX = null;\r\n    let lineY = null;\r\n    for (let i = 0; i < dragState.lines.y.length; i++) {\r\n      const { top: t, showTop: s } = dragState.lines.y[i];\r\n      if (Math.abs(t - top) < 5) {\r\n        lineY = s;\r\n        moveY = dragState.startY - dragState.startTop + t;\r\n        break;\r\n      }\r\n    }\r\n    for (let i = 0; i < dragState.lines.x.length; i++) {\r\n      const { left: l, showLeft: s } = dragState.lines.x[i];\r\n      if (Math.abs(l - left) < 5) {\r\n        lineX = s;\r\n        moveX = dragState.startX - dragState.startLeft + l;\r\n        break;\r\n      }\r\n    }\r\n    markline.x = lineX;\r\n    markline.y = lineY;\r\n\r\n    let durX = moveX - dragState.startX;\r\n    let durY = moveY - dragState.startY;\r\n    focusData.value.focused.forEach((block, idx) => {\r\n      block.top = dragState.startPos[idx].top + durY;\r\n      block.left = dragState.startPos[idx].left + durX;\r\n    })\r\n  }\r\n\r\n  const mouseup = () => {\r\n    document.removeEventListener('mousemove', mousemove);\r\n    document.removeEventListener('mouseup', mouseup);\r\n    markline.x = null;\r\n    markline.y = null;\r\n    if (dragState.dragging) {\r\n      events.emit('end');\r\n    }\r\n  }\r\n\r\n  const mousedown = (e) => {\r\n    // console.log(lastSelectedBlock.value);\r\n\r\n    const { width: BWidth, height: BHeight } = lastSelectedBlock.value;\r\n    dragState = {\r\n      startX: e.clientX,\r\n      startY: e.clientY,\r\n      startTop: lastSelectedBlock.value.top,\r\n      startLeft: lastSelectedBlock.value.left,\r\n      dragging: false,\r\n      startPos: focusData.value.focused.map(({ top, left }) => ({ top, left })),\r\n      lines: (() => {\r\n        const { unfocused } = focusData.value;\r\n        let lines = { x: [], y: [] };\r\n        [...unfocused,\r\n        {\r\n          top: 0,\r\n          left: 0,\r\n          width: data.value.container.width,\r\n          height: data.value.container.height\r\n        }\r\n        ].forEach((block) => {\r\n          try {\r\n            if (BWidth === null || BHeight === null) throw new ReferenceError('Undefined Block B Size!');\r\n            if (block.width === null || block.height === null || block.top === null || block.left === null) throw new ReferenceError('Undefined Block A Size!');\r\n            const { top: ATop, left: ALeft, width: AWidth, height: AHeight } = block;\r\n            lines.y.push({ showTop: ATop, top: ATop });\r\n            lines.y.push({ showTop: ATop, top: ATop - BHeight });\r\n            lines.y.push({ showTop: ATop + AHeight / 2, top: ATop + AHeight / 2 - BHeight / 2 });\r\n            lines.y.push({ showTop: ATop + AHeight, top: ATop + AHeight });\r\n            lines.y.push({ showTop: ATop + AHeight, top: ATop + AHeight - BHeight });\r\n\r\n            lines.x.push({ showLeft: ALeft, left: ALeft });\r\n            lines.x.push({ showLeft: ALeft + AWidth, left: ALeft + AWidth });\r\n            lines.x.push({ showLeft: ALeft + AWidth / 2, left: ALeft + AWidth / 2 - BWidth / 2 });\r\n            lines.x.push({ showLeft: ALeft + AWidth, left: ALeft + AWidth - BWidth });\r\n            lines.x.push({ showLeft: ALeft, left: ALeft - BWidth });\r\n          } catch (e) {\r\n            console.log(e);\r\n          }\r\n        });\r\n        return lines;\r\n        // console.log(lines)\r\n      })()\r\n    }\r\n    document.addEventListener('mousemove', mousemove);\r\n    document.addEventListener('mouseup', mouseup);\r\n  }\r\n\r\n  return {\r\n    mousedown,\r\n    markline\r\n  }\r\n}","import { events } from \"./events\";\r\nimport deepcopy from 'deepcopy';\r\nimport { onUnmounted } from \"vue\";\r\n\r\nexport function useCommand(data, focusData) {\r\n  const state = {\r\n    current: -1, // index of current state\r\n    opQueue: [], //\r\n    commands: {}, // map of command name to actting function\r\n    commandArray: [],\r\n    destoryArray: []\r\n  }\r\n\r\n  const registry = (command) => {\r\n    state.commandArray.push(command);\r\n    state.commands[command.name] = (...args) => {\r\n      const { redo, undo } = command.execute(...args);\r\n      redo();\r\n      if (!command.pushQueue) {\r\n        return;\r\n      }\r\n\r\n      let { opQueue, current } = state;\r\n\r\n      if (opQueue.length > 0) {\r\n        opQueue.slice(0, current + 1);\r\n        state.opQqueue = opQueue;\r\n      }\r\n      // debugger;\r\n      opQueue.push({ redo, undo });\r\n      state.current = current + 1;\r\n      console.log('history:', opQueue);\r\n    }\r\n  }\r\n\r\n  registry({\r\n    name: 'redo',\r\n    keyboard: 'ctrl+y',\r\n    execute() {\r\n      return {\r\n        redo() {\r\n          let item = state.opQueue[state.current + 1];\r\n          if (item) {\r\n            item.redo && item.redo();\r\n            state.current++;\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n  });\r\n  registry({\r\n    name: 'undo',\r\n    keyboard: 'ctrl+z',\r\n    execute() {\r\n      return {\r\n        redo() {\r\n          if (state.current === -1) return;\r\n          let item = state.opQueue[state.current];\r\n          if (item) {\r\n            item.undo && item.undo();\r\n            state.current--;\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n  });\r\n  registry({\r\n    name: 'drag',\r\n    pushQueue: true,\r\n    init() {\r\n      this.before = null;\r\n      const start = () => this.before = deepcopy(data.value.blocks);\r\n      const end = () => state.commands.drag();\r\n      events.on('start', start);\r\n      events.on('end', end);\r\n      return () => {\r\n        events.off('start', start);\r\n        events.off('end', end);\r\n      }\r\n    },\r\n    execute() {\r\n      let before = this.before;\r\n      let after = data.value.blocks;\r\n      return {\r\n        redo() {\r\n          data.value = { ...data.value, blocks: after };\r\n        },\r\n        undo() {\r\n          data.value = { ...data.value, blocks: before };\r\n        }\r\n      }\r\n    }\r\n  });\r\n  registry({\r\n    name: 'updateContainer',\r\n    pushQueue: true,\r\n    execute(newValue) {\r\n      let state = {\r\n        before: data.value,\r\n        after: newValue\r\n      }\r\n      return {\r\n        redo: () => {\r\n          data.value = state.after;\r\n        },\r\n        undo: () => {\r\n          data.value = state.before;\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  registry({\r\n    name: 'updateBlock',\r\n    pushQueue: true,\r\n    execute(newBlock, oldBlock) {\r\n      let state = {\r\n        before: data.value.blocks,\r\n        after: (() => {\r\n          let blocks = [...data.value.blocks];\r\n          const index = data.value.blocks.indexOf(oldBlock);\r\n          if (index !== -1) {\r\n            blocks.splice(index, 1, newBlock)\r\n          }\r\n          return blocks;\r\n        })()\r\n      }\r\n      return {\r\n        redo: () => {\r\n          data.value = { ...data.value, blocks: state.after };\r\n        },\r\n        undo: () => {\r\n          data.value = { ...data.value, blocks: state.before };\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  registry({\r\n    name: 'placeTop',\r\n    pushQueue: true,\r\n    execute() {\r\n      let before = deepcopy(data.value.blocks);\r\n      let after = (() => {\r\n        let { focused, unfocused } = focusData.value;\r\n        const maxZIndex = unfocused.reduce((pre, curBlock) => Math.max(pre, curBlock.zIndex), -Infinity) + 1;\r\n        focused.forEach((block) => block.zIndex = maxZIndex);\r\n        return data.value.blocks;\r\n      })();\r\n\r\n      return {\r\n        redo: () => {\r\n          data.value = { ...data.value, blocks: after };\r\n        },\r\n        undo: () => {\r\n          data.value = { ...data.value, blocks: before }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  registry({\r\n    name: 'placeBottom',\r\n    pushQueue: true,\r\n    execute() {\r\n      let before = deepcopy(data.value.blocks);\r\n      let after = (() => {\r\n        let { focused, unfocused } = focusData.value;\r\n        const minZIndex = unfocused.reduce((pre, curBlock) => Math.min(pre, curBlock.zIndex), Infinity) - 1;\r\n\r\n        if (minZIndex < 0) {\r\n          unfocused.forEach((block) => block.zIndex++);\r\n        }\r\n        focused.forEach((block) => block.zIndex = minZIndex < 0 ? 0 : minZIndex);\r\n        return data.value.blocks;\r\n      })();\r\n\r\n      return {\r\n        redo: () => {\r\n          data.value = { ...data.value, blocks: after };\r\n        },\r\n        undo: () => {\r\n          data.value = { ...data.value, blocks: before }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  registry({\r\n    name: 'delete',\r\n    pushQueue: true,\r\n    execute() {\r\n      let before = deepcopy(data.value.blocks);\r\n      let after = focusData.value.unfocused;\r\n      return {\r\n        redo: () => {\r\n          data.value = { ...data.value, blocks: after };\r\n        },\r\n        undo: () => {\r\n          data.value = { ...data.value, blocks: before }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  const KeyboardEvent = (() => {\r\n    const keyCodeMap = {\r\n      89: 'y',\r\n      90: 'z'\r\n    }\r\n    const onKeydown = (e) => {\r\n      const { ctrlKey, keyCode } = e;\r\n      let keyStr = [];\r\n      if (ctrlKey) keyStr.push('ctrl');\r\n      keyStr.push(keyCodeMap[keyCode]);\r\n      keyStr = keyStr.join('+');\r\n\r\n      state.commandArray.forEach(({ keyboard, name }) => {\r\n        if (!keyboard) return;\r\n        if (keyboard === keyStr) {\r\n          state.commands[name]();\r\n          e.preventDefault();\r\n        }\r\n      });\r\n\r\n    }\r\n    const init = () => {\r\n      window.addEventListener('keydown', onKeydown);\r\n      return () => {\r\n        window.removeEventListener('keydown', onKeydown);\r\n      }\r\n    }\r\n    return init;\r\n  })();\r\n\r\n  (() => {\r\n\r\n    state.destoryArray.push(KeyboardEvent())\r\n\r\n    state.commandArray.forEach(command => command.init && state.destoryArray.push(command.init()))\r\n  })();\r\n\r\n  onUnmounted(() => {\r\n    state.destoryArray.forEach(fn => fn && fn());\r\n  });\r\n\r\n  return state;\r\n}","import { ElDialog, ElButton, ElInput } from \"element-plus\";\r\nimport { reactive } from \"vue\";\r\nimport { render } from \"vue\";\r\nimport { createVNode } from \"vue\";\r\nimport { defineComponent } from \"vue\";\r\n\r\nconst DialogComponent = defineComponent({\r\n  props: {\r\n    option: {type: Object}\r\n  },\r\n  setup(props, context) {\r\n    const state = reactive({\r\n      option: props.option,\r\n      isShow: false,\r\n    });\r\n\r\n    context.expose({\r\n      showDialog(option) {\r\n        state.option = option;\r\n        state.isShow = true;\r\n      }\r\n    });\r\n\r\n    const onCancel = () => {\r\n      state.isShow = false;\r\n    }\r\n\r\n    const onConfirm = () => {\r\n      state.isShow = false;\r\n      state.option.onConfirm && state.option.onConfirm(state.option.content);\r\n    }\r\n\r\n    return () => {\r\n      return <ElDialog v-model={state.isShow} title={state.option.title}>\r\n        {{\r\n          default: () => <ElInput\r\n            type=\"textarea\"\r\n            v-model={state.option.content}\r\n            rows={10}\r\n            ></ElInput>,\r\n          footer: () => state.option.footer && <div>\r\n            <ElButton onClick={onCancel}>取消</ElButton>\r\n            <ElButton type=\"primary\" onClick={onConfirm}>确定</ElButton>\r\n          </div>\r\n        }}\r\n      </ElDialog>\r\n    }\r\n  }\r\n});\r\n\r\nlet vm = null;\r\n\r\nexport function $dialog(option) {\r\n  if (!vm) {\r\n    let el = document.createElement('div');\r\n    vm = createVNode(DialogComponent, {option});\r\n    render(vm, el)\r\n    document.body.appendChild(el);\r\n  }\r\n  \r\n\r\n  let {showDialog} = vm.component.exposed;\r\n  showDialog(option);\r\n}","import { reactive } from 'vue';\r\nimport { onMounted } from 'vue';\r\nimport { onBeforeUnmount } from 'vue';\r\nimport { inject } from 'vue';\r\nimport { provide } from 'vue';\r\nimport { ref } from 'vue';\r\nimport { computed } from 'vue';\r\nimport { defineComponent } from 'vue';\r\nimport { createVNode, render } from 'vue';\r\n\r\nexport const DropdownItem = defineComponent({\r\n  props: {\r\n    label: String,\r\n    icon: String,\r\n  },\r\n  setup(props) {\r\n    // const {label, icon} = props;\r\n    const hide = inject('hide');\r\n    return () => <div class=\"dropdown-item\" onClick={hide}>\r\n      <i class={props.icon}></i>\r\n      <span>{props.label}</span>\r\n    </div>\r\n  }\r\n  \r\n})\r\n\r\nconst DropdownComponent = defineComponent({\r\n  props: {\r\n    option: { type: Object },\r\n  },\r\n  setup(props, context) {\r\n    const state = reactive({\r\n      option: props.option,\r\n      isShow: false,\r\n      top: 0,\r\n      left: 0\r\n\r\n    });\r\n    context.expose({\r\n      showDropdown(option) {\r\n        state.option = option;\r\n        state.isShow = true;\r\n        let { top, left, height } = option.el.getBoundingClientRect();\r\n        state.top = top + height;\r\n        state.left = left;\r\n\r\n      }\r\n    });\r\n\r\n    provide('hide', () => {\r\n      state.isShow = false\r\n    });\r\n\r\n    const classes = computed(() => [\r\n      'dropdown', { 'dropdown-isShow': state.isShow }\r\n    ]);\r\n    const styles = computed(() => ({\r\n      top: `${state.top}px`,\r\n      left: `${state.left}px`\r\n    }));\r\n\r\n\r\n    const el = ref(null);\r\n\r\n    const onMousedownDocument = (e) => {\r\n      if (!el.value.contains(e.target)) {\r\n        state.isShow = false;\r\n      }\r\n    };\r\n    \r\n\r\n    onMounted(() => {\r\n      document.body.addEventListener('mousedown', onMousedownDocument, true);\r\n    });\r\n    onBeforeUnmount(() => {\r\n      document.body.removeEventListener('mousedown', onMousedownDocument);\r\n    });\r\n    return () => {\r\n      return <div class={classes.value} style={styles.value} ref={el}>\r\n        {state.option.content()}\r\n      </div>\r\n    };\r\n\r\n  }\r\n});\r\n\r\nlet vm = null;\r\n\r\nexport function $dropdown(option) {\r\n  if (!vm) {\r\n    let el = document.createElement('div');\r\n    vm = createVNode(DropdownComponent, { option });\r\n    render(vm, el)\r\n    document.body.appendChild(el);\r\n  }\r\n\r\n\r\n  let { showDropdown } = vm.component.exposed;\r\n  showDropdown(option);\r\n}","import deepcopy from \"deepcopy\";\r\nimport { ElInput } from \"element-plus\";\r\nimport { ElColorPicker } from \"element-plus\";\r\nimport { ElOption } from \"element-plus\";\r\nimport { ElSelect } from \"element-plus\";\r\nimport { ElForm, ElFormItem, ElButton, ElInputNumber } from \"element-plus\";\r\nimport { watch } from \"vue\";\r\nimport { reactive } from \"vue\";\r\nimport { inject } from \"vue\";\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    block: {type: Object},\r\n    data: {type: Object},\r\n    updateContainer: {type: Function},\r\n    updateBlock: {type: Function},\r\n  },\r\n  setup(props){\r\n    const config = inject('config');\r\n    const state = reactive({\r\n      editData: {}\r\n    });\r\n    const reset = () => {\r\n      if (!props.block) {\r\n        state.editData = deepcopy(props.data.container);\r\n      } else {\r\n        state.editData = deepcopy(props.block);\r\n      }\r\n    };\r\n\r\n    const applyChanges = () => {\r\n      if (!props.block) {\r\n        props.updateContainer({...props.data, container: state.editData});\r\n      } else {\r\n        props.updateBlock(state.editData, props.block);\r\n      }\r\n    };\r\n\r\n    watch(()=>props.block, reset, {immediate: true});\r\n\r\n    return () => {\r\n      let content = [];\r\n      if (!props.block) {\r\n        content.push(<>\r\n          <ElFormItem label=\"容器宽度\">\r\n            <ElInputNumber v-model={state.editData.width}></ElInputNumber>\r\n          </ElFormItem>\r\n          <ElFormItem label=\"容器高度\">\r\n            <ElInputNumber v-model={state.editData.height}></ElInputNumber>\r\n          </ElFormItem>\r\n        </>);\r\n      } else {\r\n        const component = config.componentsMap[props.block.type];\r\n        if (component && component.props) {\r\n          content.push(Object\r\n            .entries(component.props)\r\n            .map(([propName, propConfig])=>{\r\n              return <ElFormItem label={propConfig.label}>\r\n                {{\r\n                  input: () => <ElInput v-model={state.editData.props[propName]}></ElInput>,\r\n                  color: () => <ElColorPicker v-model={state.editData.props[propName]}></ElColorPicker>,\r\n                  select: () => <ElSelect v-model={state.editData.props[propName]}>\r\n                    {propConfig.option.map(option => {\r\n                      return <ElOption label={option.label} value={option.value}></ElOption>\r\n                    })}\r\n                  </ElSelect>\r\n\r\n                }[propConfig.type]()}\r\n              </ElFormItem>\r\n            })\r\n          );\r\n        }\r\n        if(component && component.model) {\r\n          content.push(Object\r\n            .entries(component.model)\r\n            .map(([modelName, label]) => {\r\n              return <ElFormItem label={label}>\r\n                <ElInput v-model={state.editData.model[modelName]}></ElInput>\r\n              </ElFormItem>\r\n            })\r\n          );\r\n        }\r\n      }\r\n      \r\n      return (\r\n        <ElForm labelPosition=\"top\" style=\"padding: 30px\">\r\n          {content}\r\n          <ElFormItem>\r\n            <ElButton type=\"primary\" onClick={applyChanges}>应用</ElButton>\r\n            <ElButton onClick={reset}>重置</ElButton>\r\n          </ElFormItem>\r\n        </ElForm>\r\n      );\r\n    }\r\n  }\r\n\r\n})","import { computed } from \"vue\";\r\nimport { inject } from \"vue\";\r\nimport { ref } from \"vue\";\r\nimport { defineComponent } from \"vue\";\r\nimport EditorBlock from \"./editor-block\";\r\nimport './visual-editor.scss';\r\nimport deepcopy from \"deepcopy\";\r\nimport { useComponentDragger } from \"./useComponentDragger\";\r\nimport { useFocus } from \"./useFocus\";\r\nimport { useBlockDragger } from \"./useBlockDragger\";\r\nimport { useCommand } from \"./useCommand\";\r\nimport { $dialog } from \"@/components/DialogForm\";\r\nimport { $dropdown, DropdownItem } from \"@/components/DropdownMenu\";\r\nimport EditorOperator from \"./editor-operator\";\r\nimport { ElButton } from \"element-plus\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    modelValue: { type: Object },\r\n    formData: {type: Object}\r\n  },\r\n  emits: ['update:modelValue'],\r\n  setup(props, context) {\r\n    const previewRef = ref(false);\r\n    const editorRef = ref(true)\r\n\r\n    const data = computed({\r\n      get() {\r\n        return props.modelValue\r\n      },\r\n      set(value) {\r\n        context.emit('update:modelValue', deepcopy(value));\r\n      }\r\n    });\r\n\r\n    const containerStyles = computed(() => ({\r\n      width: `${data.value.container.width}px`,\r\n      height: `${data.value.container.height}px`\r\n    }));\r\n\r\n    const blockUpdateHandler = (index, block) => {\r\n      let blocks = data.value.blocks;\r\n      blocks[index] = block;\r\n      data.value = {\r\n        ...data.value,\r\n        blocks: [\r\n          ...blocks\r\n        ]\r\n      };\r\n    };\r\n\r\n    const config = inject('config');\r\n\r\n    const containerRef = ref(null);\r\n    const { dragstart, dragend } = useComponentDragger(containerRef, data);\r\n    const { blockMousedown, containerMousedown, clearBlockFocus, focusData, lastSelectedBlock } = useFocus(data, previewRef, (e) => mousedown(e));\r\n    const { mousedown, markline } = useBlockDragger(data, focusData, lastSelectedBlock)\r\n\r\n\r\n    const buttons = [\r\n      { label: '撤销', icon: 'icon-back', handler: () => commands.undo() },\r\n      { label: '重做', icon: 'icon-forward', handler: () => commands.redo() },\r\n      {\r\n        label: '导入', icon: 'icon-import', handler: () => {\r\n          $dialog({\r\n            title: '导入 JSON',\r\n            content: '',\r\n            footer: true,\r\n            onConfirm(text) {\r\n              // data.value = JSON.parse(text);\r\n              commands.updateContainer(JSON.parse(text));\r\n            }\r\n          });\r\n\r\n        }\r\n      },\r\n      {\r\n        label: '导出', icon: 'icon-export', handler: () => {\r\n          $dialog({\r\n            title: '导出 JSON',\r\n            content: JSON.stringify(data.value),\r\n            footer: false\r\n          });\r\n        }\r\n      },\r\n      { label: '置顶', icon: 'icon-place-top', handler: () => commands.placeTop() },\r\n      { label: '置底', icon: 'icon-place-bottom', handler: () => commands.placeBottom() },\r\n      { label: '删除', icon: 'icon-delete', handler: () => commands.delete() },\r\n      {\r\n        label: () => previewRef.value ? '编辑' : '预览',\r\n        icon: () => previewRef.value ? 'icon-edit' : 'icon-browse',\r\n        handler: () => {\r\n          previewRef.value = !previewRef.value;\r\n          clearBlockFocus();\r\n        }\r\n      },\r\n      {\r\n        label: '发布', icon: 'icon-close', handler: () => {\r\n          editorRef.value = false;\r\n          clearBlockFocus();\r\n        }\r\n      },\r\n      {\r\n        label: '保存', icon: 'icon-save', handler: () => {\r\n          sessionStorage.setItem('pageData', JSON.stringify(data.value));\r\n          alert('saved in sessionStorage');\r\n        }\r\n      },\r\n\r\n    ];\r\n\r\n    const { commands } = useCommand(data, focusData);\r\n\r\n    const onContextMenuBlock = (e, block) => {\r\n      e.preventDefault();\r\n      $dropdown({\r\n        el: e.target,\r\n        content: () => {\r\n          return <div>\r\n            <DropdownItem label=\"删除\" icon=\"icon-delete\" onClick={() => commands.delete()}></DropdownItem>\r\n            <DropdownItem label=\"置顶\" icon='icon-place-top' onClick={() => commands.placeTop()}></DropdownItem>\r\n            <DropdownItem label=\"置底\" icon='icon-place-bottom' onClick={() => commands.placeBottom()}></DropdownItem>\r\n            <DropdownItem label=\"查看\" icon='icon-place-browse' onClick={() => {\r\n              $dialog({\r\n                title: '查看组件数据',\r\n                content: JSON.stringify(block)\r\n              })\r\n            }}></DropdownItem>\r\n            <DropdownItem label=\"导入\" icon='icon-place-import' onClick={() => {\r\n              $dialog({\r\n                title: '导入组件数据',\r\n                content: '',\r\n                footer: true,\r\n                onConfirm(text) {\r\n                  text = JSON.parse(text);\r\n                  commands.updateBlock(text, block);\r\n                }\r\n              })\r\n            }}></DropdownItem>\r\n\r\n          </div>\r\n        },\r\n      });\r\n    }\r\n\r\n    return () => !editorRef.value ? <>\r\n      <div\r\n        class=\"editor-container-canvas__content\"\r\n        style={containerStyles.value}\r\n      >\r\n        {\r\n          (data.value.blocks.map((block) => (\r\n            <EditorBlock\r\n              class={'editor-block-preview'}\r\n              block={block}\r\n              formData={props.formData}\r\n            ></EditorBlock>\r\n          )))\r\n        }\r\n      </div>\r\n      <div style=\"position: fixed; top:0; left:0;\">\r\n        <ElButton type=\"info\" onClick={() => editorRef.value = true}>\r\n          返回编辑\r\n        </ElButton>\r\n        {JSON.stringify(props.formData)}\r\n      </div>\r\n    </>\r\n      :\r\n      <div class=\"editor\">\r\n        <div class=\"editor-material\">\r\n          {config.componentsList.map(component => (\r\n            <div\r\n              class=\"editor-material-item\"\r\n              draggable\r\n              onDragstart={e => dragstart(e, component)}\r\n              onDragend={e => dragend(e)}\r\n            >\r\n              <span>{component.label}</span>\r\n              <div>{component.preview()}</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div class=\"editor-menu\">\r\n          {buttons.map((btn) => {\r\n            const icon = typeof btn.icon == 'function' ? btn.icon() : btn.icon;\r\n            const label = typeof btn.label == 'function' ? btn.label() : btn.label;\r\n            return <div class=\"editor-menu-button\" onClick={btn.handler}>\r\n              <i class={icon}></i>\r\n              <span>{label}</span>\r\n            </div>\r\n          })}\r\n        </div>\r\n        <div class=\"editor-panel\">\r\n          <EditorOperator\r\n            block={lastSelectedBlock.value}\r\n            data={data.value}\r\n            updateContainer={commands.updateContainer}\r\n            updateBlock={commands.updateBlock}\r\n          ></EditorOperator>\r\n        </div>\r\n        <div class=\"editor-container\">\r\n          <div class=\"editor-container-canvas\">\r\n            <div\r\n              class=\"editor-container-canvas__content\"\r\n              style={containerStyles.value}\r\n              ref={containerRef}\r\n              onMousedown={containerMousedown}\r\n            >\r\n\r\n              {\r\n                (data.value.blocks.map((block, index) => (\r\n                  <EditorBlock\r\n                    class={(block.focus ? 'editor-block-focus' : '') + (previewRef.value ? 'editor-block-preview' : '')}\r\n                    block={block}\r\n                    onMousedown={(e) => blockMousedown(e, block, index)}\r\n                    onContextmenu={(e) => onContextMenuBlock(e, block)}\r\n                    updateIndexBlock={blockUpdateHandler}\r\n                    index={index}\r\n                    formData={props.formData}\r\n                  ></EditorBlock>\r\n                )))\r\n              }\r\n              {markline.x !== null && <div class=\"markline-x\" style={{ left: `${markline.x}px` }}></div>}\r\n              {markline.y !== null && <div class=\"markline-y\" style={{ top: `${markline.y}px` }}></div>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  }\r\n})","import { computed } from \"vue\";\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  props: {\r\n    start: {type: Number},\r\n    end: {type: Number}\r\n  },\r\n  emits: ['update:start', 'update:end'],\r\n  setup(props, context) {\r\n    const start = computed({\r\n      get() {\r\n        return props.start;\r\n      },\r\n      set(val) {\r\n        context.emit('update:start', val);\r\n      }\r\n    });\r\n    const end = computed({\r\n      get() {\r\n        return props.end;\r\n      },\r\n      set(val) {\r\n        context.emit('update:end', val);\r\n      }\r\n    });\r\n\r\n    return () => (<div class=\"range-selector\">\r\n      <input type=\"text\" v-model={start.value}></input>\r\n      <span>~</span>\r\n      <input type=\"text\" v-model={end.value}></input>\r\n    </div>)\r\n\r\n  }\r\n})","import RangeSelector from '@/components/RangeSelector';\r\nimport { ElButton, ElInput } from 'element-plus'\r\n\r\nfunction createComponentsConfig() {\r\n  const componentsList = [];\r\n  const componentsMap = {};\r\n\r\n  return {\r\n    componentsList,\r\n    componentsMap,\r\n    register: (component) => {\r\n      componentsList.push(component);\r\n      componentsMap[component.type] = component;\r\n    }\r\n  };\r\n\r\n}\r\n\r\nexport let registerConfig = createComponentsConfig();\r\n\r\nconst createInputProp = label => ({\r\n  type: 'input',\r\n  label\r\n});\r\nconst createColorProp = label => ({\r\n  type: 'color',\r\n  label\r\n});\r\nconst createSelectProp = (label, option) => ({\r\n  type: 'select',\r\n  label,\r\n  option\r\n})\r\n\r\nconsole.log(registerConfig);\r\nconst placeholderImgSite = \"https://dummyimage.com/\";\r\n\r\nregisterConfig.register({\r\n  label: '文本',\r\n  preview: () => 'TextArea prewview',\r\n  render: ({ props }) => <span style={{ color: props.color, fontSize: props.size }}>{props.text || '文本'}</span>,\r\n  type: 'text',\r\n  props: {\r\n    text: createInputProp('输入文本内容'),\r\n    color: createColorProp('字体颜色'),\r\n    size: createSelectProp('字体大小', [\r\n      { label: '12px', value: '12px' },\r\n      { label: '14px', value: '14px' },\r\n      { label: '16px', value: '16px' },\r\n      { label: '18px', value: '18px' },\r\n      { label: '20px', value: '20px' },\r\n      { label: '24px', value: '24px' },\r\n      { label: '28px', value: '28px' }\r\n    ]),\r\n  }\r\n\r\n});\r\nregisterConfig.register({\r\n  label: '按钮',\r\n  resize: {\r\n    width: true,\r\n    height: true\r\n  },\r\n  preview: () => <ElButton type=\"primary\">Button</ElButton>,\r\n  render: ({ props, size }) => <ElButton\r\n    style={{ height: `${size.height}px`, width: `${size.width}px` }}\r\n    type={props.type}\r\n    size={props.size}\r\n  >\r\n    {props.text || '按钮'}\r\n  </ElButton>,\r\n  type: 'button',\r\n  props: {\r\n    text: createInputProp('输入按钮内容'),\r\n    type: createSelectProp('按钮类型', [\r\n      { label: '基础', value: 'primary' },\r\n      { label: '成功', value: 'success' },\r\n      { label: '警告', value: 'warning' },\r\n      { label: '危险', value: 'danger' },\r\n      { label: '信息', value: 'info' },\r\n    ]),\r\n    size: createSelectProp('按钮尺寸', [\r\n      { label: '中等（默认）', value: 'default' },\r\n      { label: '大', value: 'large' },\r\n      { label: '小', value: 'small' },\r\n\r\n    ]),\r\n\r\n  },\r\n});\r\nregisterConfig.register({\r\n  label: '输入框',\r\n  resize: {\r\n    width: true\r\n  },\r\n  preview: () => <ElInput placeholder=\"text\"></ElInput>,\r\n  render: ({ model, size }) => <ElInput\r\n    placeholder=\"text\"\r\n    {...model.default}\r\n    style={{ width: `${size.width}px` }}\r\n  ></ElInput>,\r\n  type: 'input',\r\n  model: {\r\n    default: '绑定字段'\r\n  }\r\n});\r\n\r\nregisterConfig.register({\r\n  label: '范围选择器',\r\n  preview: () => <RangeSelector placeholder=\"text\"></RangeSelector>,\r\n  render: ({ model }) => {\r\n    return <RangeSelector\r\n      {...{\r\n        start: model.start.modelValue,\r\n        end: model.end.modelValue,\r\n        'onUpdate:start': model.start['onUpdate:modelValue'],\r\n        'onUpdate:end': model.end['onUpdate:modelValue'],\r\n      }}\r\n\r\n    ></RangeSelector>\r\n  },\r\n  type: 'range',\r\n  model: {\r\n    start: '开始范围',\r\n    end: '结束范围'\r\n  }\r\n});\r\n\r\nregisterConfig.register({\r\n  label: '图片',\r\n  resize: {\r\n    width: true,\r\n    height: true\r\n  },\r\n  preview: () => <img src={`${placeholderImgSite}100x50`}></img>,\r\n  render: ({ props, size }) => <img\r\n    src={props.text || `${placeholderImgSite}${size.width}x${size.height}`}\r\n    alt=\"img\"\r\n    style={{ height: `${size.height}px`, width: `${size.width}px` }}\r\n  ></img>,\r\n  type: 'image',\r\n  props: {\r\n    text: createInputProp('输入图片链接'),\r\n  },\r\n});\r\n\r\nregisterConfig.register({\r\n  label: '视频',\r\n  resize: {\r\n    width: true,\r\n    height: true\r\n  },\r\n  preview: () => '视频',\r\n  render: ({ props, size }) => <video\r\n    src={props.text}\r\n    controls=\"controls\"\r\n    style={{ height: `${size.height}px`, width: `${size.width}px` }}\r\n    ></video>,\r\n  props: {\r\n    text: createInputProp('输入视频链接'),\r\n  },\r\n  type: 'video'\r\n});","import { render } from \"./App.vue?vue&type=template&id=3d76bc24\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3d76bc24&lang=scss\"\n\nimport exportComponent from \"D:\\\\Vue-Editor\\\\lowcode-visual-editor\\\\node_modules\\\\.pnpm\\\\vue-loader@17.0.0_webpack@5.74.0\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport 'element-plus/dist/index.css'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunklowcode_visual_editor\"] = self[\"webpackChunklowcode_visual_editor\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1575); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","_createElementBlock","_createVNode","_component_VisualEditor","$setup","$event","formData","defineComponent","props","block","type","Object","component","setup","width","height","resize","data","onMousemove","e","clientX","clientY","startX","startY","startWidth","startHeight","startLeft","startTop","direction","horizontal","vertical","durX","durY","top","left","hasResize","onMouseup","document","body","removeEventListener","onMousedown","stopPropagation","addEventListener","updateIndexBlock","Function","index","Number","blockStyles","computed","zIndex","config","inject","blockRef","ref","onMounted","offsetWidth","offsetHeight","value","alignCenter","componentsMap","RenderComponent","render","size","model","keys","reduce","prev","modelName","propName","modelValue","v","focus","events","mitt","useComponentDragger","containerRef","currentComponent","dragenter","dataTransfer","dropEffect","dragover","preventDefault","dragleave","drop","blocks","offsetY","offsetX","dragstart","emit","dragend","useFocus","previewRef","callback","selectIndex","lastSelectedBlock","clearBlockFocus","forEach","containerMousedown","blockMousedown","shiftKey","focusData","focused","length","unfocused","blcok","push","useBlockDragger","dragState","dragging","markline","reactive","x","y","mousemove","moveX","moveY","lineX","lineY","i","lines","t","showTop","s","Math","abs","l","showLeft","idx","startPos","mouseup","mousedown","BWidth","BHeight","map","container","ReferenceError","ATop","ALeft","AWidth","AHeight","console","log","useCommand","state","current","opQueue","commands","commandArray","destoryArray","registry","command","name","args","redo","undo","execute","pushQueue","slice","opQqueue","keyboard","item","init","this","before","start","deepcopy","end","drag","on","off","after","newValue","newBlock","oldBlock","indexOf","splice","maxZIndex","pre","curBlock","max","Infinity","minZIndex","min","KeyboardEvent","keyCodeMap","onKeydown","ctrlKey","keyCode","keyStr","join","window","onUnmounted","fn","DialogComponent","option","context","isShow","expose","showDialog","onCancel","onConfirm","content","title","default","footer","vm","$dialog","el","createElement","createVNode","appendChild","exposed","DropdownItem","label","String","icon","hide","DropdownComponent","showDropdown","getBoundingClientRect","provide","classes","styles","onMousedownDocument","contains","target","onBeforeUnmount","$dropdown","updateContainer","updateBlock","editData","reset","applyChanges","watch","immediate","entries","propConfig","input","color","select","emits","editorRef","get","set","containerStyles","blockUpdateHandler","buttons","handler","text","JSON","parse","stringify","placeTop","placeBottom","delete","sessionStorage","setItem","alert","onContextMenuBlock","componentsList","preview","btn","val","createComponentsConfig","register","registerConfig","createInputProp","createColorProp","createSelectProp","placeholderImgSite","fontSize","components","VisualEditor","pageData","getItem","username","password","__exports__","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","priority","notFulfilled","fulfilled","j","every","key","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}